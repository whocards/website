---
import Card from '~components/Card.astro'
import Layout from '~layouts/Layout.astro'
import { resJson } from '~utils'
import { DATA_URL } from '~utils/constants'

const languages: { [key: string]: string } = await fetch(
  DATA_URL + '/languages.json'
).then(resJson)
const questions = await fetch(DATA_URL + '/questions.json').then(resJson)
---

<Layout title='question'>
  <main>
    <section>
      <h1>Languages with questions</h1>
      <p>
        Below each name find the standard abriviation for the language according
        to <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes'
          >ISO 639</a
        >
      </p>
      <ul>
        {
          Object.entries(languages).map(([lang, name]) => (
            <Card href={`/questions/${lang}`} title={name} body={lang} />
          ))
        }
      </ul>
    </section>
    <section>
      <h1>Questions</h1>
      <p>
        A list of all questions, if you want to see all the languages of a
        question at once
      </p>
      <ul class='qs-grid'>
        {
          Object.keys(questions).map((id) => (
            <a href={`/questions/${id}`}>{id}</a>
          ))
        }
      </ul>
    </section>
  </main>
</Layout>

<style>
  main {
    margin: auto;
    padding: 1.5rem;
    max-width: 80vw;
    display: flex;
    gap: 2rem;
  }
  section {
    width: 50%;
  }
  ul {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
    gap: 1rem;
    padding: 0;
  }
  h1 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0;
  }
  a {
    text-decoration: none;
    line-height: 1.4;
    padding-left: 0.25rem;
    border-radius: 0.35rem;
    opacity: 0.8;
    color: #111;
    transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    font-weight: bold;
  }
  a:is(:hover, :focus-within) {
    color: rgb(var(--accent));
  }
  .qs-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(11, 1fr);
    grid-auto-flow: column;
  }
  .qs-grid a {
    padding-left: 0;
  }
</style>
