---
import {Icon} from 'astro-icon'
import {getCurrentLanguage} from '~utils/language'
const home = getCurrentLanguage(Astro.url.pathname)
const isQuestionPage = Astro.url.pathname.includes('question')

const links = [{href: '/community-funding', title: 'Community funding'}]
---

<div class='drawer drawer-end'>
  <input id='who-drawer' type='checkbox' class='drawer-toggle' />
  <div class='drawer-content flex flex-col'>
    <!-- Navbar -->
    <div class='navbar h-16 bg-transparent'>
      <div class='mx-2 flex-1 px-2'>
        <a href={`/${home}`} aria-label='homepage link'>
          <Icon name='logo' class='w-36' />
        </a>
      </div>
      <div class:list={['flex-none hidden', {' lg:block': !isQuestionPage}]}>
        <ul class='menu menu-horizontal'>
          <!-- Navbar menu content here -->
          {
            links.map((link) => (
              <li>
                <a href={link.href}>{link.title}</a>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
    <slot />
  </div>
  <div class='drawer-side'>
    <label for='who-drawer' class='drawer-overlay'></label>
    <ul class='menu w-80 bg-dark py-10'>
      <!-- Sidebar content here -->
      {
        links.map((link) => (
          <li>
            <a href={link.href}>{link.title}</a>
          </li>
        ))
      }
    </ul>
  </div>
</div>

<div class:list={['flex-none fixed right-2 top-2 z-10', {'lg:hidden': !isQuestionPage}]}>
  <!-- <label  class="btn btn-square btn-ghost swap swap-rotate text-white">
    <input type="checkbox" />
    <svg class="swap-off fill-current" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-6 h-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    <svg class="swap-on fill-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"/></svg>
  </label> -->
  <label class='swap btn-ghost swap-rotate btn-square btn' id='who-menu-button'>
    <!-- hamburger icon -->
    <svg
      class='swap-off fill-current'
      xmlns='http://www.w3.org/2000/svg'
      width='32'
      height='32'
      viewBox='0 0 512 512'
      ><path d='M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z'></path></svg
    >

    <!-- close icon -->
    <svg
      class='swap-on fill-current'
      xmlns='http://www.w3.org/2000/svg'
      width='32'
      height='32'
      viewBox='0 0 512 512'
      ><polygon
        points='400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49'
      ></polygon></svg
    >
  </label>
</div>

<script>
  const button = document.getElementById('who-menu-button')!
  const drawer = document.getElementById('who-drawer')! as HTMLInputElement

  button.addEventListener('click', (e) => {
    e.preventDefault()
    drawer.checked = !drawer.checked
    button.classList.toggle('swap-active')
  })
</script>
